ここから連続再生テスト

<script>
　$(function () {
    
    let num = 0;
    
    // ここからfor文 videoの数（新たにモデルで作った値分）まわす
    let video = document.getElementById("video"+String(num));
    
    console.log("log出力");
    console.log("イベント外");
    
    video.addEventListener("ended", function () {
      
      $(this).hide();
      
      // id変換テスト
      // let num += 1;
      video = document.getElementById("video"+String(num += 1));
      
      console.log("log出力");
      // console.log(num);
      
      $("video"+String(num)).show();
      // $("video1").show();
      
      video.play();
    });
    // ここまで
    
    
    // video02の再生が終わった場合
    // video02.addEventListener("ended", function () {
    //   $(this).hide();
    //   $(video01).show();
    //   video01.play();
    // });
  });
  
</script>



<% if posts.any? %>
  <ul class="list-unstyled mt-2">
    <% posts.each_with_index do |post, i| %>
      <% id_name = "video" + i.to_s %>
      <video id="<%=id_name%>" src="<%= url_for(post.video.attachment) %>" type="video/mp4", width="100%", height="100%" controls autobuffer></video>
      <p><%=id_name%></p>
    <% end %>
    
        <!--動画繰り返しテスト-->
        <!--<div class="movie">-->
        <!--  <video id="video01" poster="" autoplay muted playsinline controls metadata width="100%">-->
        <!--    <source src="https://itsakura.com/wp-content/uploads/2018/03/test1.mp4" type="video/webm">-->
        <!--    <p>動画が表示されない際のメッセージ.</p>-->
        <!--  </video>-->
        <!--</div>-->
        
        <!--<div class="movie">-->
        <!--  <video id="video02" poster="" muted playsinline controls metadata width="100%" style="display: none;">-->
        <!--    <source src="https://itsakura.com/wp-content/uploads/2018/03/test1.mp4" type="video/webm">-->
        <!--    <p>動画が表示されない際のメッセージ.</p>-->
        <!--  </video>-->
        <!--</div>-->
        
  </ul>
<% end %>